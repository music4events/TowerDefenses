<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tower Defense Coop</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Lobby Screen -->
    <div id="lobby-screen">
        <div class="lobby-container">
            <h1>Tower Defense Coop</h1>
            <div class="lobby-mode-select">
                <button id="btn-play" class="lobby-btn primary">Jouer</button>
                <button id="btn-leaderboard" class="lobby-btn">Classement</button>
            </div>

            <div id="multiplayer-panel" class="hidden">
                <div class="input-group">
                    <label>Ton pseudo</label>
                    <input type="text" id="player-name" placeholder="Entrez votre pseudo" maxlength="20">
                </div>

                <div class="lobby-actions">
                    <button id="btn-create-room" class="lobby-btn">Creer une partie</button>
                    <div class="divider">ou</div>
                    <div class="join-room">
                        <input type="text" id="room-code-input" placeholder="Code de la partie" maxlength="6">
                        <button id="btn-join-room" class="lobby-btn">Rejoindre</button>
                    </div>
                </div>
            </div>

            <div id="room-panel" class="hidden">
                <div class="room-info">
                    <span>Code de la partie:</span>
                    <span id="room-code-display" class="room-code"></span>
                </div>
                <div id="players-list">
                    <h3>Joueurs</h3>
                    <ul id="player-list"></ul>
                </div>
                <div id="mp-game-mode" class="hidden">
                    <h3>Mode de jeu</h3>
                    <div class="game-mode-options">
                        <button class="mode-select-btn mp-mode selected" data-mode="waves">
                            <span class="mode-icon">üåä</span>
                            <span class="mode-name">Vagues</span>
                        </button>
                        <button class="mode-select-btn mp-mode" data-mode="endless">
                            <span class="mode-icon">‚ôæÔ∏è</span>
                            <span class="mode-name">Endless</span>
                        </button>
                    </div>
                </div>
                <button id="btn-start-game" class="lobby-btn primary hidden">Lancer la partie</button>
                <p id="waiting-msg" class="waiting-msg">En attente du host...</p>
            </div>

            <div id="lobby-error" class="error-msg hidden"></div>

            <!-- Leaderboard Panel -->
            <div id="leaderboard-panel" class="hidden">
                <button id="btn-back-lobby" class="lobby-btn back-btn">Retour</button>
                <div class="leaderboard-tabs">
                    <button class="lb-tab active" data-mode="waves">Mode Vagues</button>
                    <button class="lb-tab" data-mode="endless">Mode Endless</button>
                </div>
                <div class="leaderboard-content">
                    <div class="leaderboard-header">
                        <span class="lb-rank">#</span>
                        <span class="lb-name">Joueur</span>
                        <span class="lb-wave">Vague</span>
                        <span class="lb-kills">Kills</span>
                        <span class="lb-score">Score</span>
                    </div>
                    <div id="leaderboard-list" class="leaderboard-list">
                        <div class="lb-loading">Chargement...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="game-container" class="hidden">
        <canvas id="gameCanvas"></canvas>
        <div id="ui">
            <div id="resources">
                <div class="resource" id="res-iron">
                    <span class="res-icon iron"></span>
                    <span class="res-value">500</span>
                </div>
                <div class="resource" id="res-copper">
                    <span class="res-icon copper"></span>
                    <span class="res-value">0</span>
                </div>
                <div class="resource" id="res-coal">
                    <span class="res-icon coal"></span>
                    <span class="res-value">0</span>
                </div>
                <div class="resource" id="res-gold">
                    <span class="res-icon gold"></span>
                    <span class="res-value">0</span>
                </div>
            </div>
            <div id="wave-info">
                <span id="wave-number">Vague 1</span>
                <span id="kill-counter">Kills: 0 | Score: 0</span>
                <span id="wave-timer"></span>
                <button id="btn-skip-wave" class="skip-btn hidden">Lancer la vague</button>
            </div>
            <div id="speed-control">
                <span>Vitesse:</span>
                <button class="speed-btn active" data-speed="1">x1</button>
                <button class="speed-btn" data-speed="2">x2</button>
                <button class="speed-btn" data-speed="5">x5</button>
                <button class="speed-btn" data-speed="10">x10</button>
                <button id="btn-show-paths" class="path-btn" title="Afficher les itineraires">üìç</button>
            </div>
            <div id="graphics-settings">
                <span>Particules:</span>
                <input type="range" id="particle-slider" min="10" max="100" value="100" title="Nombre de particules affich√©es">
                <span id="particle-value">100%</span>
            </div>
            <div id="nexus-health">
                <div id="nexus-health-bar">
                    <div id="nexus-health-fill"></div>
                </div>
                <span id="nexus-health-text">1000 / 1000</span>
            </div>
            <div id="build-menu">
                <h3>Construction</h3>
                <div id="build-buttons">
                    <button class="build-btn" data-building="turret-mg">
                        <div class="btn-icon turret-mg"></div>
                        <span class="btn-name">Mitrailleuse</span>
                        <span class="btn-cost"><span class="cost-iron">100</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-sniper">
                        <div class="btn-icon turret-sniper"></div>
                        <span class="btn-name">Sniper</span>
                        <span class="btn-cost"><span class="cost-iron">200</span> <span class="cost-copper">50</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-artillery">
                        <div class="btn-icon turret-artillery"></div>
                        <span class="btn-name">Artillerie</span>
                        <span class="btn-cost"><span class="cost-iron">300</span> <span class="cost-copper">100</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-flamethrower">
                        <div class="btn-icon turret-flame"></div>
                        <span class="btn-name">Flammes</span>
                        <span class="btn-cost"><span class="cost-iron">150</span> <span class="cost-coal">30</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-tesla">
                        <div class="btn-icon turret-tesla"></div>
                        <span class="btn-name">Tesla</span>
                        <span class="btn-cost"><span class="cost-iron">400</span> <span class="cost-copper">150</span> <span class="cost-gold">50</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-laser">
                        <div class="btn-icon turret-laser"></div>
                        <span class="btn-name">Laser</span>
                        <span class="btn-cost"><span class="cost-iron">500</span> <span class="cost-copper">200</span> <span class="cost-gold">100</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-shotgun">
                        <div class="btn-icon turret-shotgun"></div>
                        <span class="btn-name">Shotgun</span>
                        <span class="btn-cost"><span class="cost-iron">150</span> <span class="cost-copper">30</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-multi-artillery">
                        <div class="btn-icon turret-multi"></div>
                        <span class="btn-name">Multi-Art.</span>
                        <span class="btn-cost"><span class="cost-iron">400</span> <span class="cost-copper">150</span> <span class="cost-coal">50</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-healer">
                        <div class="btn-icon turret-healer"></div>
                        <span class="btn-name">Healer</span>
                        <span class="btn-cost"><span class="cost-iron">250</span> <span class="cost-copper">100</span> <span class="cost-gold">30</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-slowdown">
                        <div class="btn-icon turret-slow"></div>
                        <span class="btn-name">Ralentisseur</span>
                        <span class="btn-cost"><span class="cost-iron">180</span> <span class="cost-copper">60</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-mortar">
                        <div class="btn-icon turret-mortar"></div>
                        <span class="btn-name">Mortier</span>
                        <span class="btn-cost"><span class="cost-iron">350</span> <span class="cost-copper">120</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-railgun">
                        <div class="btn-icon turret-railgun"></div>
                        <span class="btn-name">Railgun</span>
                        <span class="btn-cost"><span class="cost-iron">500</span> <span class="cost-copper">200</span> <span class="cost-gold">80</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-drone">
                        <div class="btn-icon turret-drone"></div>
                        <span class="btn-name">Drone</span>
                        <span class="btn-cost"><span class="cost-iron">300</span> <span class="cost-copper">150</span> <span class="cost-gold">50</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-shockwave">
                        <div class="btn-icon turret-shock"></div>
                        <span class="btn-name">Shockwave</span>
                        <span class="btn-cost"><span class="cost-iron">350</span> <span class="cost-copper">150</span> <span class="cost-gold">60</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-speed-booster">
                        <div class="btn-icon turret-speed"></div>
                        <span class="btn-name">Speed Boost</span>
                        <span class="btn-cost"><span class="cost-iron">200</span> <span class="cost-copper">80</span> <span class="cost-gold">40</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-damage-booster">
                        <div class="btn-icon turret-damage"></div>
                        <span class="btn-name">Dmg Boost</span>
                        <span class="btn-cost"><span class="cost-iron">250</span> <span class="cost-copper">100</span> <span class="cost-gold">50</span></span>
                    </button>
                    <button class="build-btn" data-building="turret-range-booster">
                        <div class="btn-icon turret-range"></div>
                        <span class="btn-name">Range Boost</span>
                        <span class="btn-cost"><span class="cost-iron">300</span> <span class="cost-copper">120</span> <span class="cost-gold">60</span></span>
                    </button>
                    <!-- TOURELLES 2x2 -->
                    <button class="build-btn medium-turret" data-building="turret-missile">
                        <div class="btn-icon turret-missile"></div>
                        <span class="btn-name">Missile 2x2</span>
                        <span class="btn-cost"><span class="cost-iron">600</span> <span class="cost-copper">200</span> <span class="cost-gold">80</span></span>
                    </button>
                    <button class="build-btn medium-turret" data-building="turret-plasma">
                        <div class="btn-icon turret-plasma"></div>
                        <span class="btn-name">Plasma 2x2</span>
                        <span class="btn-cost"><span class="cost-iron">700</span> <span class="cost-copper">250</span> <span class="cost-gold">100</span></span>
                    </button>
                    <button class="build-btn medium-turret" data-building="turret-cryo">
                        <div class="btn-icon turret-cryo"></div>
                        <span class="btn-name">Cryo 2x2</span>
                        <span class="btn-cost"><span class="cost-iron">550</span> <span class="cost-copper">180</span> <span class="cost-gold">70</span></span>
                    </button>
                    <button class="build-btn medium-turret" data-building="turret-gatling">
                        <div class="btn-icon turret-gatling"></div>
                        <span class="btn-name">Gatling 2x2</span>
                        <span class="btn-cost"><span class="cost-iron">650</span> <span class="cost-copper">220</span> <span class="cost-gold">60</span></span>
                    </button>
                    <button class="build-btn medium-turret" data-building="turret-emp">
                        <div class="btn-icon turret-emp"></div>
                        <span class="btn-name">EMP 2x2</span>
                        <span class="btn-cost"><span class="cost-iron">600</span> <span class="cost-copper">300</span> <span class="cost-gold">120</span></span>
                    </button>
                    <!-- TOURELLES 3x3 -->
                    <button class="build-btn big-turret" data-building="turret-flak">
                        <div class="btn-icon turret-flak"></div>
                        <span class="btn-name">FLAK 3x3</span>
                        <span class="btn-cost"><span class="cost-iron">800</span> <span class="cost-copper">300</span> <span class="cost-gold">100</span></span>
                    </button>
                    <button class="build-btn big-turret" data-building="turret-mega-tesla">
                        <div class="btn-icon turret-mega-tesla"></div>
                        <span class="btn-name">Mega Tesla 3x3</span>
                        <span class="btn-cost"><span class="cost-iron">1200</span> <span class="cost-copper">500</span> <span class="cost-gold">200</span></span>
                    </button>
                    <button class="build-btn big-turret" data-building="turret-mega-railgun">
                        <div class="btn-icon turret-mega-railgun"></div>
                        <span class="btn-name">Mega Rail 3x3</span>
                        <span class="btn-cost"><span class="cost-iron">1500</span> <span class="cost-copper">600</span> <span class="cost-gold">250</span></span>
                    </button>
                    <button class="build-btn big-turret" data-building="turret-rocket-array">
                        <div class="btn-icon turret-rocket-array"></div>
                        <span class="btn-name">Rockets 3x3</span>
                        <span class="btn-cost"><span class="cost-iron">1100</span> <span class="cost-copper">450</span> <span class="cost-gold">180</span></span>
                    </button>
                    <button class="build-btn big-turret" data-building="turret-laser-array">
                        <div class="btn-icon turret-laser-array"></div>
                        <span class="btn-name">Laser 3x3</span>
                        <span class="btn-cost"><span class="cost-iron">1000</span> <span class="cost-copper">400</span> <span class="cost-gold">160</span></span>
                    </button>
                    <button class="build-btn big-turret" data-building="turret-particle">
                        <div class="btn-icon turret-particle"></div>
                        <span class="btn-name">Particle 3x3</span>
                        <span class="btn-cost"><span class="cost-iron">1300</span> <span class="cost-copper">550</span> <span class="cost-gold">220</span></span>
                    </button>
                    <button class="build-btn big-turret" data-building="turret-nuclear">
                        <div class="btn-icon turret-nuclear"></div>
                        <span class="btn-name">Nuclear 3x3</span>
                        <span class="btn-cost"><span class="cost-iron">2000</span> <span class="cost-copper">800</span> <span class="cost-gold">400</span></span>
                    </button>
                    <button class="build-btn big-turret" data-building="turret-storm">
                        <div class="btn-icon turret-storm"></div>
                        <span class="btn-name">Storm 3x3</span>
                        <span class="btn-cost"><span class="cost-iron">1100</span> <span class="cost-copper">500</span> <span class="cost-gold">200</span></span>
                    </button>
                    <button class="build-btn big-turret" data-building="turret-deathray">
                        <div class="btn-icon turret-deathray"></div>
                        <span class="btn-name">Death Ray 3x3</span>
                        <span class="btn-cost"><span class="cost-iron">1400</span> <span class="cost-copper">600</span> <span class="cost-gold">280</span></span>
                    </button>
                    <button class="build-btn big-turret" data-building="turret-missile-battery">
                        <div class="btn-icon turret-missile-battery"></div>
                        <span class="btn-name">Missiles 3x3</span>
                        <span class="btn-cost"><span class="cost-iron">1200</span> <span class="cost-copper">500</span> <span class="cost-gold">200</span></span>
                    </button>
                    <button class="build-btn big-turret" data-building="turret-orbital">
                        <div class="btn-icon turret-orbital"></div>
                        <span class="btn-name">Orbital 3x3</span>
                        <span class="btn-cost"><span class="cost-iron">2500</span> <span class="cost-copper">1000</span> <span class="cost-gold">500</span></span>
                    </button>
                    <button class="build-btn" data-building="wall">
                        <div class="btn-icon wall"></div>
                        <span class="btn-name">Mur</span>
                        <span class="btn-cost"><span class="cost-iron">20</span></span>
                    </button>
                    <button class="build-btn" data-building="extractor">
                        <div class="btn-icon extractor"></div>
                        <span class="btn-name">Foreuse</span>
                        <span class="btn-cost"><span class="cost-iron">50</span></span>
                    </button>
                </div>
                <div id="action-modes">
                    <button id="btn-sell-mode" class="mode-btn sell-mode">Vendre (75%)</button>
                    <button id="btn-upgrade-mode" class="mode-btn upgrade-mode">Ameliorer</button>
                </div>
            </div>
            <!-- Selection info panel -->
            <div id="selection-info" class="hidden">
                <h3>Selection</h3>
                <div id="selection-details"></div>
            </div>
            <!-- Chat for multiplayer -->
            <div id="chat-container" class="hidden">
                <div id="chat-messages"></div>
                <input type="text" id="chat-input" placeholder="Message..." maxlength="100">
            </div>
        </div>
    </div>
    <script type="module" src="js/main.js"></script>
</body>
</html>
